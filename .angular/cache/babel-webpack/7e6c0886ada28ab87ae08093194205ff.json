{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../api.service\";\nimport * as i2 from \"../auth.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../directives/email-validator.directive\";\nimport * as i6 from \"../directives/password-validator.directive\";\n\nfunction LoginComponent_form_2_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"Error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" There was a problem creating your account. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_form_2_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"Error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Your passwords did not match. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_form_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 4, 5);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_2_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.onSubmitRegisterForm();\n    });\n    i0.ɵɵelementStart(2, \"h4\");\n    i0.ɵɵtext(3, \"Create Account\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, LoginComponent_form_2_div_4_Template, 4, 0, \"div\", 6);\n    i0.ɵɵtemplate(5, LoginComponent_form_2_div_5_Template, 4, 0, \"div\", 6);\n    i0.ɵɵelementStart(6, \"input\", 7, 8);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_2_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.model.email = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 9, 10);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_2_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.model.password = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 11, 12);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_2_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.model.password2 = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 13);\n    i0.ɵɵtext(13, \"register\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\", 14);\n    i0.ɵɵtext(15, \"Already registered? \");\n    i0.ɵɵelementStart(16, \"span\", 15);\n    i0.ɵɵlistener(\"click\", function LoginComponent_form_2_Template_span_click_16_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.switchDisplay();\n    });\n    i0.ɵɵtext(17, \"Sign In\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(1);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.registerGenericAlert);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.registerPasswordAlert);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.model.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.model.password);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.model.password2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !_r2.form.valid);\n  }\n}\n\nfunction LoginComponent_form_3_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"Error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Your email and password were incorrect. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_form_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 17, 5);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_3_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.onSubmitLoginForm();\n    });\n    i0.ɵɵelementStart(2, \"h4\");\n    i0.ɵɵtext(3, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, LoginComponent_form_3_div_4_Template, 4, 0, \"div\", 6);\n    i0.ɵɵelementStart(5, \"input\", 7, 8);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_3_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.model.email = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 18, 10);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_3_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.model.password = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 13);\n    i0.ɵɵtext(10, \"login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\", 14);\n    i0.ɵɵtext(12, \"Not registered? \");\n    i0.ɵɵelementStart(13, \"span\", 15);\n    i0.ɵɵlistener(\"click\", function LoginComponent_form_3_Template_span_click_13_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.switchDisplay();\n    });\n    i0.ɵɵtext(14, \"Create an account\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\", 14);\n    i0.ɵɵelementStart(16, \"span\", 15);\n    i0.ɵɵlistener(\"click\", function LoginComponent_form_3_Template_span_click_16_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.forgotPassword();\n    });\n    i0.ɵɵtext(17, \"Forgot Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r14 = i0.ɵɵreference(1);\n\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loginAlert);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.model.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.model.password);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !_r14.form.valid);\n  }\n}\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(apiService, authService, formBuilder) {\n      this.apiService = apiService;\n      this.authService = authService;\n      this.formBuilder = formBuilder;\n      this.model = {};\n      this.loginAlert = false;\n      this.registerGenericAlert = false;\n      this.registerPasswordAlert = false;\n      this.showLogin = true;\n    }\n\n    ngOnInit() {}\n\n    switchDisplay() {\n      this.model = {};\n      this.loginAlert = false;\n      this.registerGenericAlert = false;\n      this.registerPasswordAlert = false;\n      this.showLogin = !this.showLogin;\n    }\n\n    forgotPassword() {\n      window.location.href = \"./forgotpassword\";\n    }\n\n    resetAlerts() {\n      this.loginAlert = false;\n      this.registerGenericAlert = false;\n      this.registerPasswordAlert = false;\n    }\n\n    onSubmitRegisterForm() {\n      this.resetAlerts();\n\n      if (this.model.password !== this.model.password2) {\n        this.registerPasswordAlert = true;\n      } else if (this.model.email) {\n        this.apiService.postRegister(this.model).then(response => {\n          this.onSubmitLoginForm();\n        }).catch(error => {\n          this.registerGenericAlert = true;\n        });\n      } else {\n        this.registerGenericAlert = true;\n      }\n    }\n\n    onSubmitLoginForm() {\n      this.resetAlerts();\n\n      if (this.model.email && this.model.password) {\n        this.apiService.postLogin(this.model).then(response => {\n          if (response.success && response.token) {\n            this.authService.setToken(response.token);\n            window.location.href = \"./homepage\";\n          } else {\n            this.loginAlert = true;\n          }\n        }).catch(error => {\n          this.loginAlert = true;\n        });\n      } else {\n        this.loginAlert = true;\n      }\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"login-page\"], [1, \"form\"], [\"class\", \"register-form\", \"name\", \"registerForm\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"login-form\", \"name\", \"loginForm\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"name\", \"registerForm\", 1, \"register-form\", 3, \"ngSubmit\"], [\"form\", \"ngForm\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"email\", \"placeholder\", \"email@company.com\", \"require\", \"\", \"emailValidator\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"type\", \"password\", \"name\", \"password\", \"placeholder\", \"password\", \"require\", \"\", \"passwordValidator\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"type\", \"password\", \"name\", \"password2\", \"placeholder\", \"confirm password\", \"require\", \"\", \"passwordValidator\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"password2\", \"ngModel\"], [\"type\", \"submit\", 3, \"disabled\"], [1, \"message\"], [1, \"btn-link\", 3, \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [\"name\", \"loginForm\", 1, \"login-form\", 3, \"ngSubmit\"], [\"type\", \"password\", \"name\", \"password\", \"placeholder\", \"password\", \"require\", \"\", 3, \"ngModel\", \"ngModelChange\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, LoginComponent_form_2_Template, 18, 6, \"form\", 2);\n        i0.ɵɵtemplate(3, LoginComponent_form_3_Template, 18, 4, \"form\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.showLogin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showLogin);\n      }\n    },\n    directives: [i4.NgIf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.DefaultValueAccessor, i5.EmailValidatorDirective, i3.NgControlStatus, i3.NgModel, i6.PasswordValidatorDirective],\n    styles: [\"@import\\\"https://fonts.googleapis.com/css?family=Roboto:300\\\";.login-page[_ngcontent-%COMP%]{width:360px;padding:8% 0 0;margin:auto}.form[_ngcontent-%COMP%]{position:relative;z-index:1;background:#FFF;max-width:360px;margin:0 auto 100px;padding:45px;text-align:center;box-shadow:0 0 20px #0003,0 5px 5px #0000003d}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:\\\"Roboto\\\",sans-serif;outline:0;background:#f2f2f2;width:100%;border:0;margin:0 0 15px;padding:15px;box-sizing:border-box;font-size:14px}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:\\\"Roboto\\\",sans-serif;text-transform:uppercase;outline:0;background:#dc143c;width:100%;border:0;padding:15px;color:#fff;font-size:14px;transition:all .3 ease;cursor:pointer;opacity:1}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:enabled, .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:enabled, .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:enabled{background:#a52a2a;opacity:1}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5}.form[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin:15px 0 0;color:#b3b3b3;font-size:12px}.form[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:brown;font-size:12px;text-decoration:none;cursor:pointer}.container[_ngcontent-%COMP%]{position:relative;z-index:1;max-width:300px;margin:0 auto}.container[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]:after{content:\\\"\\\";display:block;clear:both}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin:50px auto;text-align:center}h4[_ngcontent-%COMP%]{margin:0 0 15px;padding:0;font-size:36px;font-weight:300;color:#1a1a1a}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4d4d4d;font-size:12px}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#ef3b3a}body[_ngcontent-%COMP%]{background:#76b852;background:linear-gradient(to left,#76b852,#8DC26F);font-family:\\\"Roboto\\\",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}