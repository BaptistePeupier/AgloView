{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../message.service\";\nimport * as i2 from \"../../authentication.service\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"../../Common/error-message/error-message.component\";\nconst _c0 = [\"errorMessageComponent\"];\nexport let AnnonceurStatistiqueComponent = /*#__PURE__*/(() => {\n  class AnnonceurStatistiqueComponent {\n    constructor(msg, auth) {\n      this.msg = msg;\n      this.auth = auth;\n    }\n\n    ngOnInit() {\n      this.msg.Read('annonceur', {\n        _id: this.auth.getId(),\n        email: this.auth.getEmail()\n      }).subscribe(res => {\n        if (res.status === 'error') {\n          this.errorMessage.sendError(res.data.reason);\n        } else {\n          this.annonces = res.data.annonces;\n        }\n      });\n    }\n\n    TotalVues() {\n      let vues = 0;\n\n      for (let i = 0; i < this.annonces.length; i++) {\n        vues += this.annonces[i].nb_vues;\n      }\n\n      return vues;\n    }\n\n    TotalTemps() {\n      let temps = 0;\n      console.log(this.annonces);\n\n      for (let i = 0; i < this.annonces.length; i++) {\n        if (this.annonces.length > 0) {\n          for (let j = 0; j < this.annonces[i].total_tmp_vue.length; j++) {\n            temps += this.annonces[i].total_tmp_vue[j];\n          }\n        }\n      }\n\n      const heures = Math.floor(temps / (1000 * 60 * 60) % 24);\n      const minutes = Math.floor(temps / (1000 * 60) % 60);\n      const secondes = Math.floor(temps / 1000 % 60);\n      return {\n        heures: heures,\n        minutes: minutes,\n        secondes: secondes\n      };\n    }\n\n  }\n\n  AnnonceurStatistiqueComponent.ɵfac = function AnnonceurStatistiqueComponent_Factory(t) {\n    return new (t || AnnonceurStatistiqueComponent)(i0.ɵɵdirectiveInject(i1.MessageService), i0.ɵɵdirectiveInject(i2.AuthenticationService));\n  };\n\n  AnnonceurStatistiqueComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AnnonceurStatistiqueComponent,\n    selectors: [[\"app-annonceur-statistique\"]],\n    viewQuery: function AnnonceurStatistiqueComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.errorMessage = _t.first);\n      }\n    },\n    decls: 11,\n    vars: 4,\n    consts: [[1, \"popupGroupField\"], [\"errorMessageComponent\", \"\"]],\n    template: function AnnonceurStatistiqueComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-card\", 0);\n        i0.ɵɵelement(1, \"app-error-message\", null, 1);\n        i0.ɵɵelementStart(3, \"mat-card-title\");\n        i0.ɵɵelementStart(4, \"mat-card-title\");\n        i0.ɵɵtext(5, \"Statistiques sur vos annonces\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-card-content\");\n        i0.ɵɵelementStart(7, \"p\");\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"p\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate1(\"Nombre total de vues de vos annonces : \", ctx.TotalVues(), \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate3(\"Temps total que vos annonces ont pass\\u00E9es \\u00E0 l'\\u00E9cran : \", ctx.TotalTemps().heures, \" h \", ctx.TotalTemps().minutes, \" min \", ctx.TotalTemps().secondes, \" s\");\n      }\n    },\n    directives: [i3.MatCard, i4.ErrorMessageComponent, i3.MatCardTitle, i3.MatCardContent],\n    styles: [\".mat-card[_ngcontent-%COMP%]{max-width:25%;max-height:50%;margin-top:10%;margin-left:37.5%;text-align:center}\"]\n  });\n  return AnnonceurStatistiqueComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}